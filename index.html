<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BLUMS - –ö—Ä–∏–ø—Ç–æ–±–∏—Ä–∂–∞</title>
    <style>
        /* === –î–µ—Å–∫—Ç–æ–ø–Ω—ã–µ —Å—Ç–∏–ª–∏ === */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        body {
            background-color: #0a0e17;
            color: #ffffff;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 0;
            border-bottom: 1px solid #2a2f3b;
            flex-wrap: wrap;
            gap: 10px;
        }
        .logo {
            font-size: 24px;
            font-weight: bold;
            color: #00ff88;
        }
        nav {
            display: flex;
            gap: 20px;
            flex-wrap: wrap;
        }
        nav a {
            color: #ffffff;
            text-decoration: none;
            padding: 8px 16px;
            border-radius: 8px;
            transition: background-color 0.3s;
        }
        nav a:hover {
            background-color: #2a2f3b;
        }
        .main-content {
            display: flex;
            gap: 20px;
            margin-top: 40px;
            flex-wrap: wrap;
        }
        .tokens-list {
            flex: 1;
            min-width: 300px;
            max-width: 400px;
        }
        .token-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px;
            background-color: #1a1f2b;
            border-radius: 12px;
            margin-bottom: 10px;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        .token-item:hover {
            background-color: #2a2f3b;
        }
        .token-item.active {
            background-color: #2a2f3b;
            border: 1px solid #00ff88;
        }
        .token-info {
            display: flex;
            align-items: center;
            gap: 15px;
            flex-wrap: wrap;
        }
        .token-symbol {
            font-size: 20px;
            font-weight: bold;
        }
        .token-price {
            color: #00ff88;
        }
        .token-actions {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }
        .btn {
            padding: 8px 16px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
            transition: opacity 0.3s;
            white-space: nowrap;
        }
        .btn:hover {
            opacity: 0.8;
        }
        .btn-buy {
            background-color: #00ff88;
            color: #0a0e17;
        }
        .btn-sell {
            background-color: #ff4444;
            color: #ffffff;
        }
        .chart-container {
            flex: 2;
            min-width: 300px;
            background-color: #1a1f2b;
            border-radius: 12px;
            padding: 20px;
            height: 600px;
            position: relative;
        }
        .chart {
            width: 100%;
            height: 100%;
            background-color: #2a2f3b;
            border-radius: 8px;
        }
        .token-details {
            margin-top: 20px;
            padding: 20px;
            background-color: #1a1f2b;
            border-radius: 12px;
        }
        .token-details h2 {
            margin-bottom: 10px;
            color: #00ff88;
        }

        /* === –ú–æ–±–∏–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏ === */
        @media (max-width: 768px) {
            /* –°–∫—Ä—ã–≤–∞–µ–º –¥–µ—Å–∫—Ç–æ–ø–Ω—ã–µ –±–ª–æ–∫–∏ */
            .container, header, .main-content { display: none !important; }
            /* –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –º–æ–±–∏–ª—å–Ω—ã–µ –±–ª–æ–∫–∏ */
            .mobile-token-list, .mobile-exchange, .mobile-nav, #mobile-modal-root { display: block !important; }
            body { padding-bottom: 70px !important; }
            /* –ú–æ–±–∏–ª—å–Ω–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è */
            .mobile-nav {
                display: flex;
                position: fixed;
                left: 0;
                right: 0;
                bottom: 0;
                background: #16181e;
                border-top: 1px solid #23242a;
                z-index: 3000;
                height: 64px;
                align-items: center;
                justify-content: center;
                box-shadow: 0 -2px 12px #0003;
            }
            .mobile-nav-items {
                display: flex;
                width: 100%;
                justify-content: space-around;
                align-items: center;
            }
            .mobile-nav-item {
                display: flex;
                flex-direction: column;
                align-items: center;
                text-decoration: none;
                color: #888;
                font-size: 13px;
                gap: 3px;
                flex: 1;
                padding: 0 2px;
                transition: color 0.2s;
            }
            .mobile-nav-item.active {
                color: #00ff88;
            }
            .mobile-nav-item i {
                font-size: 22px;
            }
            /* –ú–æ–±–∏–ª—å–Ω—ã–π —Å–ø–∏—Å–æ–∫ —Ç–æ–∫–µ–Ω–æ–≤ */
            .mobile-token-list {
                background: #0a0e17;
                min-height: 100vh;
                padding-bottom: 80px;
            }
            .mobile-token-list-header {
                font-size: 20px;
                font-weight: 600;
                color: #fff;
                padding: 18px 16px 8px 16px;
            }
            .mobile-token-list-items {
                padding: 0 8px 0 8px;
            }
            .mobile-token-list .token-item {
                background: #16181e;
                border-radius: 14px;
                margin-bottom: 10px;
                padding: 16px 14px;
                display: flex;
                align-items: center;
                cursor: pointer;
                transition: background 0.2s;
            }
            .mobile-token-list .token-item:hover {
                background: #23242a;
            }
            .mobile-token-list .token-symbol {
                font-size: 17px;
                font-weight: 600;
                color: #fff;
            }
            .mobile-token-list .token-price {
                color: #00ff88;
                margin-left: 12px;
                font-size: 15px;
            }
            /* –ú–æ–±–∏–ª—å–Ω–∞—è –±–∏—Ä–∂–∞ */
            .mobile-exchange {
                background: #0a0e17;
                min-height: 100vh;
                padding-bottom: 80px;
            }
            .mobile-topbar {
                display: flex;
                align-items: center;
                justify-content: space-between;
                padding: 16px 12px 8px 12px;
                background: #16181e;
                border-bottom: 1px solid #23242a;
            }
            .mobile-back {
                background: none;
                border: none;
                color: #fff;
                font-size: 22px;
                padding: 0 8px 0 0;
                cursor: pointer;
            }
            .mobile-title {
                font-size: 18px;
                font-weight: 600;
                color: #fff;
            }
            .mobile-bot {
                color: #888;
                font-size: 14px;
                font-weight: 400;
            }
            .mobile-topbar-icons {
                display: flex;
                gap: 8px;
            }
            .mobile-topbar-btn {
                background: none;
                border: none;
                color: #fff;
                font-size: 20px;
                cursor: pointer;
            }
            .mobile-token-card {
                background: #16181e;
                border-radius: 18px;
                margin: 16px 12px 0 12px;
                padding: 16px 12px;
                box-shadow: 0 2px 8px 0 #0002;
            }
            .mobile-token-info {
                display: flex;
                align-items: center;
                gap: 12px;
            }
            .mobile-token-avatar {
                width: 44px;
                height: 44px;
                border-radius: 50%;
                border: 2px solid #23242a;
            }
            .mobile-token-name {
                font-size: 18px;
                font-weight: 600;
                color: #fff;
            }
            .mobile-token-sub {
                font-size: 13px;
                color: #888;
            }
            .mobile-share {
                margin-left: auto;
                background: #23242a;
                border: none;
                border-radius: 8px;
                color: #fff;
                font-size: 16px;
                padding: 8px 10px;
                cursor: pointer;
            }
            .mobile-token-supply {
                display: flex;
                align-items: center;
                gap: 8px;
                margin-top: 12px;
            }
            .mobile-token-percent {
                color: #00ff88;
                font-weight: 600;
                font-size: 15px;
            }
            .mobile-token-supply-numbers {
                color: #fff;
                font-size: 14px;
            }
            .mobile-info {
                color: #888;
                font-size: 15px;
                margin-left: 4px;
            }
            .mobile-token-stats {
                margin: 18px 12px 0 12px;
                background: #16181e;
                border-radius: 14px;
                padding: 12px 10px 6px 10px;
            }
            .mobile-token-stats-row {
                display: flex;
                justify-content: space-between;
                margin-bottom: 6px;
            }
            .mobile-token-stat-label {
                color: #888;
                font-size: 12px;
            }
            .mobile-token-stat-value {
                color: #fff;
                font-size: 15px;
                font-weight: 600;
            }
            .mobile-token-switches {
                display: flex;
                justify-content: space-between;
                margin: 14px 12px 0 12px;
                gap: 6px;
            }
            .mobile-switch-btn {
                background: #23242a;
                color: #fff;
                border: none;
                border-radius: 8px;
                padding: 6px 10px;
                font-size: 13px;
                font-weight: 500;
                cursor: pointer;
                transition: background 0.2s;
            }
            .mobile-switch-btn.active {
                background: #00ff88;
                color: #0a0e17;
            }
            .mobile-token-chart {
                background: #23242a;
                border-radius: 14px;
                margin: 14px 12px 0 12px;
                padding: 12px 0 0 0;
                position: relative;
                height: 130px;
                display: flex;
                flex-direction: column;
                align-items: center;
                justify-content: flex-end;
            }
            .mobile-token-chart-label {
                position: absolute;
                top: 10px;
                right: 18px;
                background: #16181e;
                color: #00ff88;
                font-size: 14px;
                font-weight: 600;
                border-radius: 6px;
                padding: 2px 8px;
            }
            .mobile-token-reactions {
                display: flex;
                justify-content: space-between;
                margin: 14px 12px 0 12px;
                gap: 8px;
            }
            .mobile-reaction {
                background: #23242a;
                color: #fff;
                border-radius: 8px;
                padding: 7px 18px;
                font-size: 15px;
                display: flex;
                align-items: center;
                gap: 7px;
                font-weight: 500;
            }
            .mobile-token-actions {
                display: flex;
                justify-content: space-between;
                margin: 18px 12px 0 12px;
                gap: 12px;
            }
            .mobile-buy-btn {
                flex: 1;
                background: #00ff88;
                color: #0a0e17;
                border: none;
                border-radius: 12px;
                font-size: 18px;
                font-weight: 700;
                padding: 14px 0;
                margin-right: 4px;
                cursor: pointer;
                transition: opacity 0.2s;
            }
            .mobile-sell-btn {
                flex: 1;
                background: #ff00b8;
                color: #fff;
                border: none;
                border-radius: 12px;
                font-size: 18px;
                font-weight: 700;
                padding: 14px 0;
                margin-left: 4px;
                cursor: pointer;
                transition: opacity 0.2s;
            }
            .mobile-buy-btn:active, .mobile-sell-btn:active {
                opacity: 0.7;
                transform: scale(0.97);
                transition: transform 0.1s, opacity 0.1s;
            }
            /* –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ */
            .mobile-modal-bg {
                position: fixed;
                top: 0; left: 0; right: 0; bottom: 0;
                background: rgba(0,0,0,0.6);
                z-index: 4000;
                display: flex;
                align-items: center;
                justify-content: center;
            }
            .mobile-modal {
                background: #16181e;
                border-radius: 16px;
                padding: 28px 18px 18px 18px;
                min-width: 260px;
                max-width: 90vw;
                box-shadow: 0 4px 24px #0005;
                display: flex;
                flex-direction: column;
                align-items: center;
            }
            .mobile-modal-title {
                color: #fff;
                font-size: 18px;
                font-weight: 600;
                margin-bottom: 12px;
            }
            .mobile-modal-input {
                width: 100%;
                padding: 10px;
                border-radius: 8px;
                border: none;
                background: #23242a;
                color: #fff;
                font-size: 16px;
                margin-bottom: 16px;
                outline: none;
            }
            .mobile-modal-btns {
                display: flex;
                gap: 10px;
                width: 100%;
            }
            .mobile-modal-btn {
                flex: 1;
                padding: 10px 0;
                border-radius: 8px;
                border: none;
                font-size: 16px;
                font-weight: 600;
                cursor: pointer;
                transition: opacity 0.2s;
            }
            .mobile-modal-btn.confirm {
                background: #00ff88;
                color: #0a0e17;
            }
            .mobile-modal-btn.cancel {
                background: #23242a;
                color: #fff;
            }
        }

        /* === –°–∫—Ä—ã—Ç–∏–µ –º–æ–±–∏–ª—å–Ω—ã—Ö –±–ª–æ–∫–æ–≤ –Ω–∞ –¥–µ—Å–∫—Ç–æ–ø–µ === */
        @media (min-width: 769px) {
            .mobile-token-list, .mobile-exchange, .mobile-nav, #mobile-modal-root { display: none !important; }
            .container, header, .main-content { display: block; }
        }
    </style>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <div class="container">
        <header>
            <div class="logo">BLUMS</div>
            <nav>
                <a href="index.html">–ë–∏—Ä–∂–∞</a>
                <a href="wallet.html">–ö–æ—à–µ–ª–µ–∫</a>
                <a href="memecoins.html">–ú–µ–º–ö–æ–∏–Ω—ã</a>
            </nav>
        </header>

        <div class="main-content">
            <div class="tokens-list">
                <div class="token-item active" onclick="selectToken('BTC')">
                    <div class="token-info">
                        <span class="token-symbol">BTC</span>
                        <span class="token-price">$45,000</span>
                    </div>
                </div>
                <div class="token-item" onclick="selectToken('ETH')">
                    <div class="token-info">
                        <span class="token-symbol">ETH</span>
                        <span class="token-price">$3,200</span>
                    </div>
                </div>
                <div class="token-item" onclick="selectToken('SOL')">
                    <div class="token-info">
                        <span class="token-symbol">SOL</span>
                        <span class="token-price">$120</span>
                    </div>
                </div>
                <div class="token-item" onclick="selectToken('TON')">
                    <div class="token-info">
                        <span class="token-symbol">TON</span>
                        <span class="token-price">$2.5</span>
                    </div>
                </div>
                <div class="token-item" onclick="selectToken('TRON')">
                    <div class="token-info">
                        <span class="token-symbol">TRON</span>
                        <span class="token-price">$0.12</span>
                    </div>
                </div>
                <div class="token-item" onclick="selectToken('TRX')">
                    <div class="token-info">
                        <span class="token-symbol">TRX</span>
                        <span class="token-price">$0.08</span>
                    </div>
                </div>
                <div class="token-item" onclick="selectToken('FPIBANK')">
                    <div class="token-info">
                        <span class="token-symbol">FPIBANK</span>
                        <span class="token-price">$0.05</span>
                    </div>
                </div>
                <div class="token-item" onclick="selectToken('CHELDEVCOIN')">
                    <div class="token-info">
                        <span class="token-symbol">CHELDEVCOIN</span>
                        <span class="token-price">$0.03</span>
                    </div>
                </div>
            </div>

            <div class="chart-container">
                <canvas id="priceChart" class="chart"></canvas>
                <div class="token-details">
                    <h2>BTC/USD</h2>
                    <div class="token-actions">
                        <button class="btn btn-buy" onclick="buyToken('BTC')">–ö—É–ø–∏—Ç—å</button>
                        <button class="btn btn-sell" onclick="sellToken('BTC')">–ü—Ä–æ–¥–∞—Ç—å</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="mobile-nav">
        <div class="mobile-nav-items">
            <a href="index.html" class="mobile-nav-item active">
                <i class="fas fa-chart-line"></i>
                <span>–ë–∏—Ä–∂–∞</span>
            </a>
            <a href="wallet.html" class="mobile-nav-item">
                <i class="fas fa-wallet"></i>
                <span>–ö–æ—à–µ–ª–µ–∫</span>
            </a>
            <a href="memecoins.html" class="mobile-nav-item">
                <i class="fas fa-coins"></i>
                <span>–ú–µ–º–∫–æ–∏–Ω—ã</span>
            </a>
        </div>
    </div>

    <!-- –ú–æ–±–∏–ª—å–Ω—ã–π —Å–ø–∏—Å–æ–∫ —Ç–æ–∫–µ–Ω–æ–≤ -->
    <div class="mobile-token-list" style="display: block;">
        <div class="mobile-token-list-header">–¢–æ–∫–µ–Ω—ã</div>
        <div class="mobile-token-list-items">
            <div class="token-item" data-symbol="BTC">
                <div class="token-info">
                    <span class="token-symbol">BTC</span>
                    <span class="token-price">$45,000</span>
                </div>
            </div>
            <div class="token-item" data-symbol="ETH">
                <div class="token-info">
                    <span class="token-symbol">ETH</span>
                    <span class="token-price">$3,200</span>
                </div>
            </div>
            <div class="token-item" data-symbol="SOL">
                <div class="token-info">
                    <span class="token-symbol">SOL</span>
                    <span class="token-price">$120</span>
                </div>
            </div>
            <div class="token-item" data-symbol="TON">
                <div class="token-info">
                    <span class="token-symbol">TON</span>
                    <span class="token-price">$2.5</span>
                </div>
            </div>
            <div class="token-item" data-symbol="TRON">
                <div class="token-info">
                    <span class="token-symbol">TRON</span>
                    <span class="token-price">$0.12</span>
                </div>
            </div>
            <div class="token-item" data-symbol="TRX">
                <div class="token-info">
                    <span class="token-symbol">TRX</span>
                    <span class="token-price">$0.08</span>
                </div>
            </div>
            <div class="token-item" data-symbol="FPIBANK">
                <div class="token-info">
                    <span class="token-symbol">FPIBANK</span>
                    <span class="token-price">$0.05</span>
                </div>
            </div>
            <div class="token-item" data-symbol="CHELDEVCOIN">
                <div class="token-info">
                    <span class="token-symbol">CHELDEVCOIN</span>
                    <span class="token-price">$0.03</span>
                </div>
            </div>
        </div>
    </div>
    <!-- /–ú–æ–±–∏–ª—å–Ω—ã–π —Å–ø–∏—Å–æ–∫ —Ç–æ–∫–µ–Ω–æ–≤ -->
    <!-- –ú–æ–±–∏–ª—å–Ω–∞—è –±–∏—Ä–∂–∞ -->
    <div class="mobile-exchange" style="display: none;">
        <div class="mobile-topbar">
            <button class="mobile-back"><i class="fas fa-arrow-left"></i></button>
            <div class="mobile-title">Blum <span class="mobile-bot">bot</span></div>
            <div class="mobile-topbar-icons">
                <button class="mobile-topbar-btn"><i class="fas fa-ellipsis-h"></i></button>
            </div>
        </div>
        <div class="mobile-token-card">
            <div class="mobile-token-info">
                <img src="https://i.imgur.com/8Km9tLL.png" alt="$WAPE" class="mobile-token-avatar" id="mobile-token-avatar">
                <div>
                    <div class="mobile-token-name" id="mobile-token-name">$WAPE</div>
                    <div class="mobile-token-sub" id="mobile-token-sub">25 Nov ‚Ä¢ STON.fi</div>
                </div>
                <button class="mobile-share"><i class="fas fa-share"></i></button>
            </div>
            <div class="mobile-token-supply">
                <span class="mobile-token-percent" id="mobile-token-percent">15%</span>
                <span class="mobile-token-supply-numbers" id="mobile-token-supply">1374/9165 TON</span>
                <i class="fas fa-info-circle mobile-info"></i>
            </div>
        </div>
        <!-- –ë–ª–æ–∫ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ -->
        <div class="mobile-token-stats">
            <div class="mobile-token-stats-row">
                <div class="mobile-token-stat">
                    <div class="mobile-token-stat-label">Market cap</div>
                    <div class="mobile-token-stat-value" id="mobile-marketcap">$7.5K</div>
                </div>
                <div class="mobile-token-stat">
                    <div class="mobile-token-stat-label">Holders</div>
                    <div class="mobile-token-stat-value" id="mobile-holders">6845</div>
                </div>
            </div>
            <div class="mobile-token-stats-row">
                <div class="mobile-token-stat">
                    <div class="mobile-token-stat-label">Txns</div>
                    <div class="mobile-token-stat-value" id="mobile-txns">1.5B</div>
                </div>
                <div class="mobile-token-stat">
                    <div class="mobile-token-stat-label">Volume</div>
                    <div class="mobile-token-stat-value" id="mobile-volume">$385,069,594</div>
                </div>
            </div>
        </div>
        <!-- –ö–Ω–æ–ø–∫–∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è -->
        <div class="mobile-token-switches">
            <button class="mobile-switch-btn active">MCap</button>
            <button class="mobile-switch-btn">Price</button>
            <button class="mobile-switch-btn">1m</button>
            <button class="mobile-switch-btn">5m</button>
            <button class="mobile-switch-btn">15m</button>
            <button class="mobile-switch-btn">1h</button>
        </div>
        <!-- –ì—Ä–∞—Ñ–∏–∫ -->
        <div class="mobile-token-chart">
            <canvas id="mobilePriceChart" width="340" height="120"></canvas>
            <div class="mobile-token-chart-label" id="mobile-chart-label">$0.44</div>
        </div>
        <!-- –†–µ–∞–∫—Ü–∏–∏ -->
        <div class="mobile-token-reactions">
            <div class="mobile-reaction"><span>üöÄ</span> <span>8.1K</span></div>
            <div class="mobile-reaction"><span>üî•</span> <span>1.2K</span></div>
            <div class="mobile-reaction"><span>üíî</span> <span>3.2K</span></div>
        </div>
        <!-- –ö–Ω–æ–ø–∫–∏ Buy/Sell -->
        <div class="mobile-token-actions">
            <button class="mobile-buy-btn">Buy</button>
            <button class="mobile-sell-btn">Sell</button>
        </div>
    </div>
    <!-- /–ú–æ–±–∏–ª—å–Ω–∞—è –±–∏—Ä–∂–∞ -->

    <div id="mobile-modal-root"></div>

    <script>
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –≤ localStorage
        if (!localStorage.getItem('wallet')) {
            localStorage.setItem('wallet', JSON.stringify({
                balance: 0,
                tokens: {}
            }));
        }

        let currentToken = 'BTC';
        let canvas, ctx;
        let chartData = [];
        let chartInterval;

        let tokenPrices = JSON.parse(localStorage.getItem('tokenPrices')) || {
            'BTC': 45000,
            'ETH': 3200,
            'SOL': 120,
            'TON': 2.5,
            'TRON': 0.12,
            'TRX': 0.08,
            'FPIBANK': 0.05,
            'CHELDEVCOIN': 0.03
        };

        // –°–æ—Ö—Ä–∞–Ω—è–µ–º –Ω–∞—á–∞–ª—å–Ω—ã–µ —Ü–µ–Ω—ã, –µ—Å–ª–∏ –∏—Ö –µ—â–µ –Ω–µ—Ç –≤ localStorage
        if (!localStorage.getItem('tokenPrices')) {
            localStorage.setItem('tokenPrices', JSON.stringify(tokenPrices));
        } else {
            // –ì–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ–º, —á—Ç–æ –º–µ–º—Ç–æ–∫–µ–Ω—ã –µ—Å—Ç—å –≤ tokenPrices
            let prices = JSON.parse(localStorage.getItem('tokenPrices'));
            if (!prices['FPIBANK']) prices['FPIBANK'] = 0.05;
            if (!prices['CHELDEVCOIN']) prices['CHELDEVCOIN'] = 0.03;
            localStorage.setItem('tokenPrices', JSON.stringify(prices));
            tokenPrices = prices;
        }

        // –°–æ—Ö—Ä–∞–Ω—è–µ–º –∏—Å—Ç–æ—Ä–∏—é —Ü–µ–Ω –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–æ–∫–µ–Ω–∞
        let priceHistory = JSON.parse(localStorage.getItem('priceHistory')) || {};
        if (!localStorage.getItem('priceHistory')) {
            Object.keys(tokenPrices).forEach(symbol => {
                priceHistory[symbol] = [];
            });
            localStorage.setItem('priceHistory', JSON.stringify(priceHistory));
        }

        // –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Ç–æ–∫–µ–Ω–∞–º–∏
        function selectToken(symbol) {
            currentToken = symbol;
            document.querySelectorAll('.token-item').forEach(item => {
                item.classList.remove('active');
            });
            event.currentTarget.classList.add('active');
            document.querySelector('.token-details h2').textContent = `${symbol}/USD`;
            updateChart();
        }

        function getTokenPrice(symbol) {
            return tokenPrices[symbol];
        }

        function updateTokenPrice(symbol, amount, isBuy) {
            const currentPrice = tokenPrices[symbol];
            let changePercent;
            
            if (isBuy) {
                changePercent = 1.2 + (amount / 100) * 4.1;
            } else {
                changePercent = 1 + (amount / 100) * 4;
            }
            
            const newPrice = isBuy 
                ? currentPrice * (1 + changePercent / 100)
                : currentPrice * (1 - changePercent / 100);
            
            tokenPrices[symbol] = newPrice;
            
            // –°–æ—Ö—Ä–∞–Ω—è–µ–º –Ω–æ–≤—É—é —Ü–µ–Ω—É –≤ localStorage
            localStorage.setItem('tokenPrices', JSON.stringify(tokenPrices));
            
            // –î–æ–±–∞–≤–ª—è–µ–º –Ω–æ–≤—É—é —Ü–µ–Ω—É –≤ –∏—Å—Ç–æ—Ä–∏—é
            if (!priceHistory[symbol]) {
                priceHistory[symbol] = [];
            }
            priceHistory[symbol].push({
                price: newPrice,
                timestamp: Date.now()
            });
            
            // –û—Å—Ç–∞–≤–ª—è–µ–º —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 100 –∑–Ω–∞—á–µ–Ω–∏–π
            if (priceHistory[symbol].length > 100) {
                priceHistory[symbol] = priceHistory[symbol].slice(-100);
            }
            
            // –°–æ—Ö—Ä–∞–Ω—è–µ–º –∏—Å—Ç–æ—Ä–∏—é –≤ localStorage
            localStorage.setItem('priceHistory', JSON.stringify(priceHistory));
            
            updateChart();
            return newPrice;
        }

        function buyToken(symbol) {
            const wallet = JSON.parse(localStorage.getItem('wallet'));
            const amount = prompt(`–°–∫–æ–ª—å–∫–æ ${symbol} –≤—ã —Ö–æ—Ç–∏—Ç–µ –∫—É–ø–∏—Ç—å?`);
            
            if (amount && !isNaN(amount)) {
                const price = getTokenPrice(symbol);
                const total = amount * price;
                
                // –û–±–Ω–æ–≤–ª—è–µ–º —Ü–µ–Ω—É –ø–æ—Å–ª–µ –ø–æ–∫—É–ø–∫–∏
                const newPrice = updateTokenPrice(symbol, parseFloat(amount), true);
                
                wallet.balance -= total;
                wallet.tokens[symbol] = (wallet.tokens[symbol] || 0) + parseFloat(amount);
                localStorage.setItem('wallet', JSON.stringify(wallet));
                alert(`–£—Å–ø–µ—à–Ω–æ –∫—É–ø–ª–µ–Ω–æ ${amount} ${symbol} –ø–æ —Ü–µ–Ω–µ $${price.toFixed(2)}. –ù–æ–≤–∞—è —Ü–µ–Ω–∞: $${newPrice.toFixed(2)}`);
            }
        }

        function sellToken(symbol) {
            const wallet = JSON.parse(localStorage.getItem('wallet'));
            const amount = prompt(`–°–∫–æ–ª—å–∫–æ ${symbol} –≤—ã —Ö–æ—Ç–∏—Ç–µ –ø—Ä–æ–¥–∞—Ç—å?`);
            
            if (amount && !isNaN(amount)) {
                if (wallet.tokens[symbol] >= parseFloat(amount)) {
                    const price = getTokenPrice(symbol);
                    const total = amount * price;
                    
                    // –û–±–Ω–æ–≤–ª—è–µ–º —Ü–µ–Ω—É –ø–æ—Å–ª–µ –ø—Ä–æ–¥–∞–∂–∏
                    const newPrice = updateTokenPrice(symbol, parseFloat(amount), false);
                    
                    wallet.balance += total;
                    wallet.tokens[symbol] -= parseFloat(amount);
                    localStorage.setItem('wallet', JSON.stringify(wallet));
                    alert(`–£—Å–ø–µ—à–Ω–æ –ø—Ä–æ–¥–∞–Ω–æ ${amount} ${symbol} –ø–æ —Ü–µ–Ω–µ $${price.toFixed(2)}. –ù–æ–≤–∞—è —Ü–µ–Ω–∞: $${newPrice.toFixed(2)}`);
                } else {
                    alert('–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Ç–æ–∫–µ–Ω–æ–≤');
                }
            }
        }

        // –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –≥—Ä–∞—Ñ–∏–∫–æ–º
        function initChart() {
            canvas = document.getElementById('priceChart');
            ctx = canvas.getContext('2d');
            
            // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ä–∞–∑–º–µ—Ä—ã canvas
            function resizeCanvas() {
                const container = canvas.parentElement;
                canvas.width = container.offsetWidth - 40; // –£—á–∏—Ç—ã–≤–∞–µ–º padding
                canvas.height = container.offsetHeight - 140; // –£—á–∏—Ç—ã–≤–∞–µ–º –≤—ã—Å–æ—Ç—É token-details
                updateChart();
            }
            
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º —Ä–∞–∑–º–µ—Ä—ã
            resizeCanvas();
            
            // –û–±–Ω–æ–≤–ª—è–µ–º —Ä–∞–∑–º–µ—Ä—ã –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Ä–∞–∑–º–µ—Ä–∞ –æ–∫–Ω–∞
            window.addEventListener('resize', resizeCanvas);
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –≥—Ä–∞—Ñ–∏–∫ –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥
            chartInterval = setInterval(updateChart, 30000);
        }

        function generateChartData() {
            const data = [];
            const symbol = currentToken;
            
            // –ò—Å–ø–æ–ª—å–∑—É–µ–º —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—É—é –∏—Å—Ç–æ—Ä–∏—é —Ü–µ–Ω
            if (priceHistory[symbol] && priceHistory[symbol].length > 0) {
                return priceHistory[symbol].map(item => item.price);
            }
            
            // –ï—Å–ª–∏ –∏—Å—Ç–æ—Ä–∏–∏ –Ω–µ—Ç, –≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º –Ω–∞—á–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
            const basePrice = getTokenPrice(symbol);
            let lastPrice = basePrice;
            
            for (let i = 0; i < 100; i++) {
                const change = lastPrice * (Math.random() * 0.04 - 0.02);
                lastPrice = lastPrice + change;
                data.push(lastPrice);
            }
            return data;
        }

        function updateChart() {
            if (!canvas || !ctx) return;
            
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            chartData = generateChartData();
            
            const min = Math.min(...chartData);
            const max = Math.max(...chartData);
            const range = max - min;
            
            // –†–∏—Å—É–µ–º —Å–µ—Ç–∫—É
            ctx.strokeStyle = '#2a2f3b';
            ctx.lineWidth = 1;
            
            for (let i = 0; i <= 4; i++) {
                const y = (canvas.height / 4) * i;
                ctx.beginPath();
                ctx.moveTo(0, y);
                ctx.lineTo(canvas.width, y);
                ctx.stroke();
            }
            
            for (let i = 0; i <= 4; i++) {
                const x = (canvas.width / 4) * i;
                ctx.beginPath();
                ctx.moveTo(x, 0);
                ctx.lineTo(x, canvas.height);
                ctx.stroke();
            }
            
            ctx.strokeStyle = '#00ff88';
            ctx.lineWidth = 2;
            ctx.beginPath();
            
            chartData.forEach((price, i) => {
                const x = (i / (chartData.length - 1)) * canvas.width;
                const y = canvas.height - ((price - min) / range) * canvas.height;
                
                if (i === 0) {
                    ctx.moveTo(x, y);
                } else {
                    ctx.lineTo(x, y);
                }
            });
            
            ctx.stroke();
            
            const currentPrice = chartData[chartData.length - 1];
            ctx.fillStyle = '#00ff88';
            ctx.font = '16px Arial';
            ctx.fillText(`–¢–µ–∫—É—â–∞—è —Ü–µ–Ω–∞: $${currentPrice.toFixed(2)}`, 10, 20);
            
            const priceChange = currentPrice - chartData[0];
            const percentChange = (priceChange / chartData[0]) * 100;
            ctx.fillStyle = priceChange >= 0 ? '#00ff88' : '#ff4444';
            ctx.fillText(`–ò–∑–º–µ–Ω–µ–Ω–∏–µ: ${percentChange.toFixed(2)}%`, 10, 45);
            
            // –û–±–Ω–æ–≤–ª—è–µ–º —Å–ø–∏—Å–æ–∫ —Ç–æ–∫–µ–Ω–æ–≤
            updateTokenList();
        }

        // –û–±–Ω–æ–≤–ª—è–µ–º —Ü–µ–Ω—ã –≤ —Å–ø–∏—Å–∫–µ —Ç–æ–∫–µ–Ω–æ–≤
        function updateTokenList() {
            document.querySelectorAll('.token-item').forEach(item => {
                const symbol = item.querySelector('.token-symbol').textContent;
                const priceElement = item.querySelector('.token-price');
                priceElement.textContent = `$${tokenPrices[symbol].toFixed(2)}`;
            });
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Å–ª—É—á–∞–π–Ω–æ–≥–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ü–µ–Ω—ã –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –≥—Ä–∞—Ñ–∏–∫–∞
        function randomPriceUpdate() {
            const symbol = currentToken;
            let prices = JSON.parse(localStorage.getItem('tokenPrices')) || tokenPrices;
            let history = JSON.parse(localStorage.getItem('priceHistory')) || priceHistory;
            let price = prices[symbol];
            // –°–ª—É—á–∞–π–Ω–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ: –≤–≤–µ—Ä—Ö –∏–ª–∏ –≤–Ω–∏–∑ –Ω–∞ 0.5-2%
            const direction = Math.random() > 0.5 ? 1 : -1;
            const percent = 0.5 + Math.random() * 1.5;
            price = price * (1 + direction * percent / 100);
            prices[symbol] = price;
            if (!history[symbol]) history[symbol] = [];
            history[symbol].push({ price, timestamp: Date.now() });
            if (history[symbol].length > 100) history[symbol] = history[symbol].slice(-100);
            localStorage.setItem('tokenPrices', JSON.stringify(prices));
            localStorage.setItem('priceHistory', JSON.stringify(history));
            tokenPrices = prices;
            priceHistory = history;
            updateChart();
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        window.onload = function() {
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º canvas
            canvas = document.getElementById('priceChart');
            ctx = canvas.getContext('2d');
            
            // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ä–∞–∑–º–µ—Ä—ã canvas
            function resizeCanvas() {
                const container = canvas.parentElement;
                canvas.width = container.offsetWidth - 40; // –£—á–∏—Ç—ã–≤–∞–µ–º padding
                canvas.height = container.offsetHeight - 140; // –£—á–∏—Ç—ã–≤–∞–µ–º –≤—ã—Å–æ—Ç—É token-details
                updateChart();
            }
            
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º —Ä–∞–∑–º–µ—Ä—ã
            resizeCanvas();
            
            // –û–±–Ω–æ–≤–ª—è–µ–º —Ä–∞–∑–º–µ—Ä—ã –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Ä–∞–∑–º–µ—Ä–∞ –æ–∫–Ω–∞
            window.addEventListener('resize', resizeCanvas);
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –≥—Ä–∞—Ñ–∏–∫ –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥
            chartInterval = setInterval(function() {
                randomPriceUpdate();
            }, 30000);
            
            // –û–±–Ω–æ–≤–ª—è–µ–º —Å–ø–∏—Å–æ–∫ —Ç–æ–∫–µ–Ω–æ–≤
            updateTokenList();
        };

        // –£–¥–∞–ª—è–µ–º —Å—Ç–∞—Ä—ã–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ resize
        window.onresize = null;

        // --- –ú–æ–±–∏–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞ ---
        function showMobileTokenCard(symbol) {
            // –ó–¥–µ—Å—å –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å —Ä–µ–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–æ–∫–µ–Ω–∞
            var tokenData = {
                'BTC': {
                    avatar: 'https://cryptologos.cc/logos/bitcoin-btc-logo.png',
                    name: 'BTC',
                    sub: 'Bitcoin ‚Ä¢ Spot',
                    percent: '+2.1%',
                    supply: '21000/21000000 BTC'
                },
                'ETH': {
                    avatar: 'https://cryptologos.cc/logos/ethereum-eth-logo.png',
                    name: 'ETH',
                    sub: 'Ethereum ‚Ä¢ Spot',
                    percent: '+1.3%',
                    supply: '120M/120M ETH'
                },
                'SOL': {
                    avatar: 'https://cryptologos.cc/logos/solana-sol-logo.png',
                    name: 'SOL',
                    sub: 'Solana ‚Ä¢ Spot',
                    percent: '+0.8%',
                    supply: '430M/500M SOL'
                },
                'TON': {
                    avatar: 'https://cryptologos.cc/logos/toncoin-ton-logo.png',
                    name: 'TON',
                    sub: 'TON ‚Ä¢ Spot',
                    percent: '+3.2%',
                    supply: '1374/9165 TON'
                },
                'TRON': {
                    avatar: 'https://cryptologos.cc/logos/tron-trx-logo.png',
                    name: 'TRON',
                    sub: 'TRON ‚Ä¢ Spot',
                    percent: '+0.5%',
                    supply: '92B/100B TRON'
                },
                'TRX': {
                    avatar: 'https://cryptologos.cc/logos/tron-trx-logo.png',
                    name: 'TRX',
                    sub: 'TRON ‚Ä¢ Spot',
                    percent: '+0.5%',
                    supply: '92B/100B TRX'
                },
                'FPIBANK': {
                    avatar: 'https://i.imgur.com/8Km9tLL.png',
                    name: 'FPIBANK',
                    sub: 'Memecoin ‚Ä¢ Spot',
                    percent: '+10%',
                    supply: '1M/10M FPIBANK'
                },
                'CHELDEVCOIN': {
                    avatar: 'https://i.imgur.com/8Km9tLL.png',
                    name: 'CHELDEVCOIN',
                    sub: 'Memecoin ‚Ä¢ Spot',
                    percent: '+7%',
                    supply: '500K/1M CHELDEVCOIN'
                }
            };
            var data = tokenData[symbol] || tokenData['BTC'];
            document.getElementById('mobile-token-avatar').src = data.avatar;
            document.getElementById('mobile-token-name').textContent = data.name;
            document.getElementById('mobile-token-sub').textContent = data.sub;
            document.getElementById('mobile-token-percent').textContent = data.percent;
            document.getElementById('mobile-token-supply').textContent = data.supply;
            document.querySelector('.mobile-exchange').style.display = 'block';
            document.querySelector('.mobile-token-list').style.display = 'none';
        }

        // –î–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö: –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∫–ª–∏–∫–∞ –ø–æ —Ç–æ–∫–µ–Ω—É
        document.addEventListener('DOMContentLoaded', function() {
            if (window.innerWidth <= 768) {
                // –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Ç–æ–ª—å–∫–æ —Å–ø–∏—Å–æ–∫ —Ç–æ–∫–µ–Ω–æ–≤
                document.querySelector('.mobile-token-list').style.display = 'block';
                document.querySelector('.mobile-exchange').style.display = 'none';
                // –ù–∞–≤–µ—à–∏–≤–∞–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ —Ç–æ–ª—å–∫–æ –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã–µ —Ç–æ–∫–µ–Ω—ã
                document.querySelectorAll('.mobile-token-list .token-item').forEach(item => {
                    item.onclick = function() {
                        var symbol = this.getAttribute('data-symbol');
                        console.log('–¢–æ–∫–µ–Ω –≤—ã–±—Ä–∞–Ω:', symbol);
                        showMobileTokenCard(symbol);
                        document.querySelector('.mobile-token-list').style.setProperty('display', 'none', 'important');
                        document.querySelector('.mobile-exchange').style.setProperty('display', 'block', 'important');
                        setTimeout(animateMobileChart, 100);
                    };
                });
                // –ö–Ω–æ–ø–∫–∞ –Ω–∞–∑–∞–¥
                document.querySelector('.mobile-back').onclick = function() {
                    document.querySelector('.mobile-exchange').style.setProperty('display', 'none', 'important');
                    document.querySelector('.mobile-token-list').style.setProperty('display', 'block', 'important');
                };
            }
        });

        // --- –ú–æ–±–∏–ª—å–Ω—ã–π –≥—Ä–∞—Ñ–∏–∫ (–∑–∞–≥–ª—É—à–∫–∞) ---
        function drawMobileChart() {
            var canvas = document.getElementById('mobilePriceChart');
            if (!canvas) return;
            var ctx = canvas.getContext('2d');
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            // –†–∏—Å—É–µ–º –ø—Ä–æ—Å—Ç—É—é –ª–∏–Ω–∏—é (–ø—Ä–∏–º–µ—Ä)
            ctx.strokeStyle = '#00ff88';
            ctx.lineWidth = 3;
            ctx.beginPath();
            ctx.moveTo(10, canvas.height - 30);
            ctx.lineTo(canvas.width / 2, 30);
            ctx.lineTo(canvas.width - 10, canvas.height - 50);
            ctx.stroke();
        }

        // –†–∏—Å—É–µ–º –≥—Ä–∞—Ñ–∏–∫ –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ –±–∏—Ä–∂–∏
        if (window.innerWidth <= 768) {
            document.querySelectorAll('.mobile-token-list .token-item').forEach(item => {
                item.addEventListener('click', function() {
                    setTimeout(drawMobileChart, 100); // –Ω–µ–±–æ–ª—å—à–æ–π —Ç–∞–π–º–∞—É—Ç –¥–ª—è –æ—Ç—Ä–∏—Å–æ–≤–∫–∏
                });
            });
        }

        // --- –ê–Ω–∏–º–∞—Ü–∏—è –≥—Ä–∞—Ñ–∏–∫–∞ ---
        function animateMobileChart() {
            var canvas = document.getElementById('mobilePriceChart');
            if (!canvas) return;
            var ctx = canvas.getContext('2d');
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º —Ç–æ—á–∫–∏
            var points = [
                {x: 10, y: canvas.height - 30},
                {x: canvas.width / 2, y: 30},
                {x: canvas.width - 10, y: canvas.height - 50}
            ];
            var steps = 60;
            var current = 0;
            function drawStep() {
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                ctx.strokeStyle = '#00ff88';
                ctx.lineWidth = 3;
                ctx.beginPath();
                ctx.moveTo(points[0].x, points[0].y);
                // –õ–∏–Ω–µ–π–Ω–∞—è –∏–Ω—Ç–µ—Ä–ø–æ–ª—è—Ü–∏—è –º–µ–∂–¥—É —Ç–æ—á–∫–∞–º–∏
                var t = current / steps;
                var x1 = points[0].x + (points[1].x - points[0].x) * t;
                var y1 = points[0].y + (points[1].y - points[0].y) * t;
                ctx.lineTo(x1, y1);
                if (t > 0.5) {
                    var t2 = (t - 0.5) * 2;
                    var x2 = points[1].x + (points[2].x - points[1].x) * t2;
                    var y2 = points[1].y + (points[2].y - points[1].y) * t2;
                    ctx.lineTo(x2, y2);
                }
                ctx.stroke();
                if (current < steps) {
                    current++;
                    requestAnimationFrame(drawStep);
                }
            }
            drawStep();
        }

        // --- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è –ø–æ–∫—É–ø–∫–∏/–ø—Ä–æ–¥–∞–∂–∏ ---
        function showMobileModal(type, symbol) {
            var root = document.getElementById('mobile-modal-root');
            var title = type === 'buy' ? '–ü–æ–∫—É–ø–∫–∞ ' + symbol : '–ü—Ä–æ–¥–∞–∂–∞ ' + symbol;
            root.innerHTML = `
                <div class='mobile-modal-bg'>
                    <div class='mobile-modal'>
                        <div class='mobile-modal-title'>${title}</div>
                        <input class='mobile-modal-input' id='mobile-modal-amount' type='number' min='0' placeholder='–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ'>
                        <div class='mobile-modal-btns'>
                            <button class='mobile-modal-btn confirm'>OK</button>
                            <button class='mobile-modal-btn cancel'>–û—Ç–º–µ–Ω–∞</button>
                        </div>
                    </div>
                </div>
            `
        }
    </script>
</body>
</html>